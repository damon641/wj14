{% extends "partition/layout.html" %} {% block body %}
<div class="container nav_drop_menu" id="Players">
    <ul>
        {%if allPlayers %}
        <li class="text_container">
            <a class="myplayer" href="/player">
                <div class="name">My Players</div>
            </a>
        </li>
        {% if session.role == 'admin'%}

        <li class="text_container">
            <a href="/allPlayers" class="active">
                <div class="name">All Players</div>
            </a>

        </li>
        {% endif %} {% endif %} {%if allPlayers == NULL %}
        <li class="text_container">
            <a class="myplayer active" href="/player">
                <div class="name">My Players</div>
            </a>
        </li>
        {% if session.role == 'admin'%}

        <li class="text_container">
            <a href="/allPlayers">
                <div class="name">All Players</div>
            </a>

        </li>
        {% endif %} {% endif %}
        <li class="text_container">
            <a href="/addPlayer">
                <div class="name"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add Player</div>
            </a>
        </li>
    </ul>
</div>
<div class="container">

    <div class="main-content">
        <!-- OVERVIEW -->
        <div class="panel panel-headline">
            <div class="panel-body panel-body-home">
                <div class="">
                    <div class="panel-heading-home">
                        <span>
                            <img class="bullet_icon" src="/dist/img/poker/Poker_icon/bullet.png">
                            <h3 class="panel-title">Player List</h3>
                            <div class="pull-right">
                                <button class="table_btn playerType" id="playerType"
                                    onclick="change('false')">Chips</button>
                                <button class="table_btn playerType active" id="playerType" onclick="change('true')"
                                    selected>Cash</button>
                            </div>
                        </span>
                    </div>
                    <div class="panel-body">
                        <div class="box-body">
                            <div class="table-responsive">
                                <input type="text" name="agent" id="agent" value="{{Agent.role}}" hidden>
                                <table id="myTable" class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>UniqueID</th>
                                            <th>Username</th>
                                            <th>First Name</th>
                                            <th>Last Name</th>
                                            {#
                                            <th>Email</th> #}
                                            <th>Chips</th>
                                            <th>Amount</th>
                                            <th>Agent Name</th>
                                            <!-- <th>Status</th> -->
                                            <!-- <th>is Bot</th> -->
                                            <th>Country</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>UniqueID</th>
                                            <th>Username</th>
                                            <th>First Name</th>
                                            <th>Last Name</th>
                                            {#
                                            <th>Email</th> #}
                                            <th>Chips</th>
                                            <th>Amount</th>
                                            <th>Agent Name</th>
                                            <!-- <th>Status</th> -->
                                            <!-- <th>is Bot</th> -->
                                            <th>Country</th>
                                            <th>Action</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
{% if session.role == 'admin'%} {%if allPlayers %}
<div class="container">
    <div class="row">
        <div class="col-lg-6">
            <div class="main-content">
                <!-- OVERVIEW -->
                <div class="panel panel-headline">
                    <div class="panel-body panel-body-home">
                        <div class="">
                            <div class="panel-heading-home">
                                <span>
                                    <img class="bullet_icon" src="/dist/img/poker/Poker_icon/bullet.png">
                                    <h3 class="panel-title">Newly Joined Players</h3>
                                </span>
                                <div class="col-sm-8">
                                    <!-- <select name="playerType" id="playerType" class="form-control">
                                        
                                        <option value=true selected>Cash</option>
                                        <option value=false>Chips</option>
                                    </select> -->
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="box-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-valign-middle">
                                            <thead>
                                                <tr>
                                                    <th>Player Name</th>
                                                    <th>Date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {%for player in latestPalyer %}
                                                <tr>
                                                    <td><img src="dist/img/user.png" class="img-circle img-size-32 mr-3" alt="User Image"><span class="users-list-name">{{player.username}} </span></td>
                                                    <td><span class="users-list-date">{{player.createdAtFormated}}</span>
                                                    </td>
                                                </tr>
                                                {%endfor%}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="main-content">
                <!-- OVERVIEW -->
                <div class="panel panel-headline">
                    <div class="panel-body panel-body-home">
                        <div class="">
                            <div class="panel-heading-home">
                                <span>
                                    <img class="bullet_icon" src="dist/img/poker/Poker_icon/bullet.png">
                                    <h3 class="panel-title">Top Value Players</h3>
                                </span>
                                <div class="col-sm-8">
                                    <!-- <select name="playerType" id="playerType" class="form-control">
                                        
                                        <option value=true selected>Cash</option>
                                        <option value=false>Chips</option>
                                    </select> -->
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="box-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-valign-middle">
                                            <thead>
                                                <tr>
                                                    <th>Player Name</th>
                                                    <th>Chips</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for player in topPlayers %}
                                                <tr>
                                                    <td><img src="dist/img/user.png" class="img-circle img-size-32 mr-3" alt="User Image"><a class="users-list-name">{{player.username}}</a></td>
                                                    <td><span class="users-list-date">{{player.chips}} Chips</span>
                                                    </td>
                                                </tr>
                                                {%endfor%}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %} {% endif %}

<!-- Main Content -->
<section class="content">
    <!-- Row -->
    <div class="row">
        <!-- /.modal -->
        <div id="responsive-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form method="POST" name="adduser" action="/player/chipsAdd">
                        <div class="modal-header">
                            <h5 class="modal-title">Add/Deduct Chips</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        </div>
                        <div class="modal-body">
                            <div id="chipsAdd"> </div>
                            <div class="form-group">
                                <label for="recipient-name" class="control-label mb-10">Chips:</label>
                                <input type="text" name="chips" class="form-control" id="action_chips" required>
                                <span class="help-block form-error" id="displayError" style="display: none;">The input
                                    value was not a correct number</span>
                            </div>
                            <div class="form-group">
                                <label for="chips_note" class="control-label mb-10">Note:</label>
                                <textarea name="chips_note" class="form-control" id="chips_note" placeholder="please enter chips notes" rows="3"></textarea>
                            </div>

                        </div>
                        <div class="modal-footer">

                            <input type="button" name="add" action="add" class="btn btn-success playerChipsAction" value="Add">
                            <input type="button" name="deduct" action="deduct" class="btn btn-danger playerChipsAction" value="Deduct">
                            <!-- <input type="submit" name="chipsValue" class="btn btn-success" value="Add">
								<input type="submit" class="btn btn-danger" name="chipsValue" value="Deduct"> -->
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Button trigger modal -->
    </div>
    <!-- /Row -->
</section>

<section class="content">
    <!-- Row -->
    <div class="row">
        <!-- /.modal -->
        <div id="chips-note-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form method="POST" name="adduser" action="/player/update/chipNotes">
                        <div class="modal-header">
                            <h5 class="modal-title">Edit Chips Note</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        </div>
                        <div class="modal-body">
                            <div id="editChipsNote"> </div>
                            <div class="form-group">
                                <label for="edit_chips_note" class="control-label mb-10">Note:</label>
                                <textarea name="edit_chips_note" class="form-control" id="edit_chips_note" placeholder="please enter chips notes" rows="3"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="submit" name="requestType" class="btn btn-success chipsNoteAction" value="Update">
                            <input type="button" class="btn btn-danger" name="requestType" value="Close" data-dismiss="modal">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Button trigger modal -->
    </div>
    <!-- /Row -->
</section>

{% endblock %} {% block Jscript %}

<script>
    var orderTable = "";
    var host = window.location.origin;
    $(document).ready(function() {
        $('.playerType').click(function() {
            $(this).siblings().removeClass('active');
            $(this).addClass('active');


        });

        let playerType = $('#playerType').val();
        if (playerType == "") {
            playerType = 'true';
        }
        let ajaxUrl = host + "/player/getPlayer?type=" + playerType;
        let ajaxExportUrl = host + "/player/getPlayer?export=all";
        let isAllPlayers = "{{allPlayers}}";
        let agent = $('#agent').val()
        if (isAllPlayers == 'true') {
            ajaxUrl = host + "/player/getAllPlayers?type=" + playerType;
            ajaxExportUrl = host + "/player/getAllPlayers?export=all";
        }
        orderTable = $('#myTable').DataTable({
            "oLanguage": {
                "sSearch": "Search Username"
            },
            "processing": true,
            "serverSide": true,
            "ordering": false,
            "autoWidth": false,
            "pageLength": 10,
            "ajax": ajaxUrl,
            "dom": 'Bfrtip',
            "buttons": [
                'csv', 'excel'
            ],
            "columns": [

                {
                    "data": "uniqId"
                }, {
                    "data": "username"
                }, {
                    "data": "firstname"
                }, {
                    "data": "lastname"
                },
                //{ "data": "email" },
                {
                    "data": "chips",
                    render: function(data, type, row) {
                        return '<span id="' + row._id + '">' + parseFloat(parseFloat(row.chips)
                            .toFixed(2)) + '</span>';

                    }
                }, {
                    "data": "amount",
                    render: function(data, type, row) {
                        if (row.currency !== undefined) {
                            var value = 0;
                            "{% for item in currency %}"
                            var curr = "{{item.currencyCode}}";
                            if (curr == row.currency) {
                                value = "{{ item.usdPerUnit }}";
                            }
                            "{% endfor %}"
                            return '<span id="' + row._id + '">' + parseFloat(parseFloat(row
                                        .chips) *
                                    parseFloat("{{setting.ratePerChip}}") * parseFloat(value))
                                .toFixed(2) + ' ' + row.currency + '</span>';
                        } else {
                            return '<span id="' + row._id + '">' + parseFloat(parseFloat(row
                                        .chips) *
                                    parseFloat("{{setting.ratePerChip}}")).toFixed(2) +
                                ' USD</span>';
                        }
                    }
                }, {
                    "data": "agentName"
                }, {
                    "data": "country",
                    render: function(data, type, row) {
                        return row.country || '';
                    }
                }, {
                    "data": "action",
                    render: function(data, type, row) {
                        var liAction = '<li><a href="/playerEdit/' + row._id +
                            '" title="Edit Player" name="edit" class="btn-success-main"><i class="fa fa-edit" aria-hidden="true"></i>Edit Profile</a></li>';


                        var onclick = "getChipsNote('" + row._id + "')";
                        var active = "Unblock";
                        var inactive = "Block"
                        liAction +=
                            '<li><a data-toggle="modal" data-target="#responsive-modal" class=" btn-success-main addChips" id="' +
                            row._id +
                            '" title="Add Chips"><i class="fa fa-dollar" aria-hidden="true"></i>Manage Chips</a></li>';
                        // liAction += '<li><a onclick="' + onclick +
                        //     '" data-toggle="modal" data-target="#chips-note-modal" class="btn-success-main editChipsNote" id="' +
                        //     row._id +
                        //     '" title="Edit Chips Note"><i class="fa fa-edit" aria-hidden="true"></i>Edit Chips Notes</a></li>';
                        var active = 'Unblock';
                        if (row.status == 'active') {
                            active = 'Block';
                        } else {
                            active = 'Unblock';
                        }
                        if (agent != "admin") {
                            liAction += '<li><a href="player/chipsHistory/' + row._id +
                                '" class="btn-success-main" title="Cash History"><i class="fa fa-history" aria-hidden="true"></i>Chips History</a></li><li><a href="/player/cashTransactionHistory/' +
                                row._id +
                                '" class=" btn-success-main" title="Chips Transaction History"><i class="fa fa-history" aria-hidden="true"></i>Cash History</a></li><li><a href="player/profile/' +
                                row._id +
                                '" class="btn-success-main" title="Player Profile"><i class="fa fa-user" aria-hidden="true"></i>Profile Summery</a></li><li><a href="JavaScript:Void(0);" name="active" id="' +
                                row._id +
                                '" class="btn-success-main playerActive"><i class="fa fa-unlock" aria-hidden="true"></i>' +
                                active + '</i></a></li>';
                        } else {
                            if (row.isCash) {
                                liAction += '<li><a href="player/chipsHistory/' + row._id +
                                    '" class="btn-success-main" title="Cash History"><i class="fa fa-history" aria-hidden="true"></i>Chips History</a></li><li><a href="/player/cashTransactionHistory/' +
                                    row._id +
                                    '" class=" btn-success-main" title="Chips Transaction History"><i class="fa fa-history" aria-hidden="true"></i>Cash History</a></li><li> <a href="player/gameHistory/' +
                                    row._id +
                                    '" class=" btn-success-main" title="Game History"><i class="fa fa-gamepad" aria-hidden="true"></i>Game History</a></li><li><a href="player/profile/' +
                                    row._id +
                                    '" class="btn-success-main" title="Player Profile"><i class="fa fa-user" aria-hidden="true"></i>Profile Summary</a></li><li><a href="JavaScript:Void(0);" name="active" id="' +
                                    row._id +
                                    '" class="btn-success-main playerActive"><i class="fa fa-unlock" aria-hidden="true"></i>' +
                                    active + '</i></a></li>';
                            } else {
                                liAction += '<li><a href="player/chipsHistory/' + row._id +
                                    '" class="btn-success-main" title="Cash History"><i class="fa fa-history" aria-hidden="true"></i>Chips History</a></li><li><a href="/player/cashTransactionHistory/' +
                                    row._id +
                                    '" class=" btn-success-main" title="Chips Transaction History"><i class="fa fa-history" aria-hidden="true"></i>Cash History</a></li><li> <a href="player/gameHistory/' +
                                    row._id +
                                    '" class=" btn-success-main" title="Game History"><i class="fa fa-gamepad" aria-hidden="true"></i>Game History</a></li><li><a href="player/profile/' +
                                    row._id +
                                    '" class="btn-success-main" title="Player Profile"><i class="fa fa-user" aria-hidden="true"></i>Player Summary</a></li><li><a href="JavaScript:Void(0);" name="active" id="' +
                                    row._id +
                                    '" class="btn-success-main playerActive"><i class="fa fa-unlock" aria-hidden="true"></i>' +
                                    active +
                                    '</i></a></li><li><a href="JavaScript:Void(0);" name="active" id="' +
                                    row._id +
                                    '" class="btn-success-main convertPlayer"><i class="fa fa-money" aria-hidden="true"></i>' +
                                    'Make Cash Player' + '</i></a></li>';
                            }
                        }

                        let ReturnAction =
                            '<div class="btn-group pull-right" style="width:-webkit-fill-available;"><button type="button" class="btn btn-primary-main btn-sm dropdown-toggle" data-toggle="dropdown" style="width:-webkit-fill-available;"> Action <span class="caret"> </span></button><ul class="dropdown-menu" role="menu">' +
                            liAction + '</ul></div>'
                        return ReturnAction;
                        // <button type="button" title="Delete Player" name="delete" id="'+row._id+'" class="btn btn-danger btn-xs btn-rounded delete"><i class="fa fa-trash" aria-hidden="true"></i></button>
                    }
                }
            ]
        });

        checkAmount = function(type) {
            var chips = $('#action_chips').val();
            if (parseFloat(chips) <= 0) {
                $('#displayError').html('please enter cash minimum 1');
                $('#displayError').show();
                return false;
            }

            $('#cashAddFrm').submit();
        }

        getChipsNote = function(playerId) {
            $('#editChipsNote').html('');
            $('#edit_chips_note').val('');
            $.ajax({
                dataType: "json",
                type: "POST",
                url: host + "/player/get/chipsNotes",
                data: {
                    'player_id': playerId
                },
                success: function(response) {
                    console.log("response: ", response);
                    if (response.status == "success") {
                        if (response.data != null) {
                            $('#edit_chips_note').val(response.data.note);
                            var html = '<input type="hidden" name="noteId" value="' + response
                                .data
                                ._id + '" />';
                            $('#editChipsNote').html(html);
                        } else {
                            $('.chipsNoteAction').val('Save');
                            var html = '<input type="hidden" name="playerId" value="' +
                                playerId +
                                '" />';
                            $('#editChipsNote').html(html);
                        }
                    } else {
                        alert('Notes not available');
                    }
                }
            })
        }

        $(function() {
            "use strict";

            var SweetAlert = function() {};

            SweetAlert.prototype.init = function() {

                    //Parameter
                    $('body').on('click', '.delete', function(e) {
                        var id = $(this).attr('id');
                        var thisElement = this;
                        swal({
                            title: "Are you sure?",
                            text: "You will not be able to recover this Player!",
                            type: "warning",
                            showCancelButton: true,
                            confirmButtonColor: "#e69a2a",
                            confirmButtonText: "Yes, delete it!",
                            cancelButtonText: "No, cancel plx!",
                            closeOnConfirm: false,
                            closeOnCancel: false
                        }, function(isConfirm) {
                            if (isConfirm) {
                                $.ajax({
                                    type: 'POST',
                                    url: host + "/player/getPlayerDelete",
                                    data: {
                                        id: id
                                    },
                                    success: function(resultData) {
                                        // alert(resultData)
                                        console.log(resultData);
                                        if (resultData == 'success') {
                                            $(thisElement).parent().parent()
                                                .hide(700);
                                            swal("Deleted!",
                                                "Your imaginary file has been deleted.",
                                                "success");
                                        } else {
                                            alert("Something went wrong")
                                        }
                                        // alert("Save Complete")
                                    }
                                });
                                swal("Deleted!", "Player Deleted Succesfully.",
                                    "success");
                            } else {
                                swal("Cancelled", "Player Not Deleted)", "error");
                            }
                        });
                        return false;
                    });

                    // Active & Deactive

                    $('body').on('click', '.playerActive', function(e) {
                        var id = $(this).attr('id');
                        var thisElement = this;
                        swal({
                            title: "Are you sure?",
                            text: "Do you want to update the status?",
                            type: "warning",
                            showCancelButton: true,
                            confirmButtonColor: "#e69a2a",
                            confirmButtonText: "Yes, Update it!",
                            cancelButtonText: "No, cancel pls!",
                            closeOnConfirm: false,
                            closeOnCancel: false
                        }, function(isConfirm) {
                            if (isConfirm) {
                                $.ajax({
                                    type: 'POST',
                                    url: host + "/player/active",
                                    data: {
                                        id: id
                                    },
                                    success: function(resultData, data) {
                                        console.log(data);
                                        if (resultData == 'success') {
                                            //location.reload();
                                            var changeText = 'Block';

                                            if ($(thisElement).parent().parent().find('.playerActive').text() == 'Block') {
                                                changeText = 'Unblock';
                                            }

                                            let icon = changeText == 'Block' ? 'fa fa-unlock' : 'fa fa-lock';

                                            $(thisElement).parent().parent().find('.playerActive').html('<i class="' + icon + '" aria-hidden="true"></i>' + changeText);

                                            // var changeText = 'active';
                                            // if ($(thisElement).parent()
                                            //     .parent().find(
                                            //         'td  .playerActive')
                                            //     .text() == 'active') {
                                            //     changeText = 'Block';
                                            // }
                                            // console.log($(thisElement)
                                            //     .parent()
                                            //     .parent().find(
                                            //         'td .playerActive')
                                            //     .text(changeText));
                                            //$(thisElement).parent().parent().hide(700);
                                            //swal("Update!", "Player Status Updated Successfully..", "success");
                                        } else {
                                            alert("Something went wrong")
                                        }

                                    }
                                });
                                swal("Success!", "Player Status Updated Succesfully.",
                                    "success");
                            } else {
                                swal("Cancelled", "Player Status not Updated)",
                                    "error");
                            }
                        });
                        return false;
                    });
                    $('body').on('click', '.convertPlayer', function(e) {
                        var id = $(this).attr('id');
                        var thisElement = this;
                        swal({
                            title: "Are you sure?",
                            text: "Do you want to convert player to cash?",
                            type: "warning",
                            showCancelButton: true,
                            confirmButtonColor: "#e69a2a",
                            confirmButtonText: "Yes, Do it!",
                            cancelButtonText: "No, cancel pls!",
                            closeOnConfirm: false,
                            closeOnCancel: false
                        }, function(isConfirm) {
                            if (isConfirm) {
                                $.ajax({
                                    type: 'POST',
                                    url: host + "/player/convert",
                                    data: {
                                        id: id
                                    },
                                    success: function(resultData, data) {
                                        console.log(data);
                                        if (resultData == 'success') {
                                            //location.reload();
                                            // var changeText = 'active';
                                            // if( $(thisElement).parent().parent().find('td  .playerActive').text() == 'active' ){
                                            // 	changeText = 'Block';
                                            // }
                                            // console.log( $(thisElement).parent().parent().find('td .playerActive').text(changeText) );
                                            $(thisElement).parent().parent()
                                                .hide(700);
                                            swal("Update!",
                                                "Player Convert Successfully..",
                                                "success");
                                        } else {
                                            alert("Something went wrong")
                                        }

                                    }
                                });
                                swal("Success!", "Player Status Updated Succesfully.",
                                    "success");
                            } else {
                                swal("Cancelled", "Player Status not Updated)",
                                    "error");
                            }
                        });
                        return false;
                    });
                },
                $.SweetAlert = new SweetAlert, $.SweetAlert.Constructor = SweetAlert;

            $.SweetAlert.init();
        });

        $("body").on("click", ".addChips", function() {
            var PlayerId = $(this).attr("id");
            // console.log("player id ----------->",PlayerId)
            var html = '<input type="hidden" id="add_chips_player_id" name="playerId" value="' +
                PlayerId +
                '" />';
            $("#chipsAdd").html(html);

            $.ajax({
                dataType: "json",
                type: "POST",
                url: host + "/player/get/chipsNotes",
                data: {
                    'player_id': PlayerId
                },
                success: function(response) {
                    console.log("response: ", response);
                    if (response.status == "success") {
                        if (response.data != null) {
                            $('#chips_note').val(response.data.note);
                        }
                    } else {
                        alert('Notes not available');
                    }
                }
            })
        });

        $("body").on("click", ".playerChipsAction", function() {
            // $(".playerChipsAction").attr("disabled", true);
            var playerId = $('#add_chips_player_id').val();
            var action = $(this).attr("action");
            var action_chips = $('#action_chips').val();

            var chips_note = $('#chips_note').val();
            if (parseFloat(action_chips) < 0 || isNaN(action_chips) || (parseFloat(action_chips) % 1 !==
                    0)) {
                document.getElementById('displayError').style.display = 'block';
                document.getElementById('displayError').style.color = 'red';
                return false;
            }

            if (parseFloat(action_chips) <= 0) {
                $('#displayError').html('please enter chips minimum 1');
                $('#displayError').css('color', 'red');
                $('#displayError').show();
                return false;
            }

            $.ajax({
                type: 'POST',
                url: host + "/player/chipsAction",
                data: {
                    playerId: playerId,
                    action: action,
                    chips: action_chips,
                    chips_note: chips_note
                },
                success: function(resultData) {
                    $('#action_chips').val(0);
                    console.log(resultData);
                    if (resultData.status == 'success') {
                        $('#responsive-modal').modal('hide');

                        $('#rootChips').html(resultData.rootChips);
                        $('#' + playerId).html(resultData.newChips);
                    } else {
                        console.log(resultData.message);
                        window.location.reload();
                    }
                    $(".playerChipsAction").attr("disabled", false);
                    // alert("Save Complete")
                }
            });
        });
        $("body").on("click", "#action_chips", function() {
            document.getElementById('displayError').style.display = 'none';
        });



    });

    function change(value) {
        let playerType = value;
        let ajaxUrl = host + "/player/getPlayer?type=" + playerType;
        let ajaxExportUrl = host + "/player/getPlayer?export=all";
        let isAllPlayers = "{{allPlayers  }}";
        let agent = $('#agent').val()
        if (isAllPlayers == 'true') {
            ajaxUrl = host + "/player/getAllPlayers?type=" + playerType;
            ajaxExportUrl = host + "/player/getAllPlayers?export=all";
        }
        orderTable.ajax.url(ajaxUrl).load();

    };
</script>
<!-- <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.flash.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script> -->
{% endblock %}